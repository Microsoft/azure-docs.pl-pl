---
title: Ocena luk w zabezpieczeniach maszyn wirtualnych BYOL w Azure Security Center
description: Wdróż rozwiązanie do oceny luk w zabezpieczeniach BYOL na platformie Virtual Machines Azure, aby uzyskać zalecenia Azure Security Center, które mogą pomóc w ochronie maszyn wirtualnych.
services: security-center
documentationcenter: na
author: memildin
manager: rkarlin
ms.service: security-center
ms.devlang: na
ms.topic: how-to
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 10/13/2020
ms.author: memildin
ms.openlocfilehash: fefd4c457ad15da775392e3bd10ba1906deba693
ms.sourcegitcommit: f88074c00f13bcb52eaa5416c61adc1259826ce7
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/21/2020
ms.locfileid: "92341995"
---
# <a name="deploy-a-bring-your-own-license-byol-vulnerability-assessment-solution"></a>Wdrażanie rozwiązania do oceny luk w zabezpieczeniach (BYOL)

Jeśli włączono **usługę Azure Defender dla serwerów**, można użyć wbudowanego narzędzia do oceny luk w zabezpieczeniach Azure Security Center, zgodnie z opisem w artykule [zintegrowany skaner luk w zabezpieczeniach maszyn wirtualnych](./deploy-vulnerability-assessment-vm.md). To narzędzie jest zintegrowane z usługą Azure Defender i nie wymaga żadnych licencji zewnętrznych — wszystko to jest bezproblemowo obsługiwane w Security Center. Ponadto zintegrowany skaner obsługuje maszyny z obsługą usługi Azure Arc.

Alternatywnie możesz chcieć wdrożyć własne rozwiązanie do oceny luk w zabezpieczeniach z licencją [Qualys](https://www.qualys.com/lp/azure) lub [Rapid7](https://www.rapid7.com/products/insightvm/). Jedno z tych rozwiązań partnerskich można zainstalować na wielu maszynach wirtualnych należących do tej samej subskrypcji (ale nie do maszyn z obsługą usługi Azure ARC).

## <a name="availability"></a>Dostępność

|Aspekt|Szczegóły|
|----|:----|
|Stan wydania:|Ogólnie dostępna (GA)|
|Typy maszyn (scenariusze hybrydowe):|![Tak](./media/icons/yes-icon.png) Maszyny wirtualne platformy Azure<br>![Nie](./media/icons/no-icon.png) Maszyny z obsługą usługi Azure Arc|
|Wpisaną|Bezpłatna|
|Wymagane role i uprawnienia:|**Właściciel zasobu** może wdrożyć skaner<br>**Czytelnik zabezpieczeń** może przeglądać wyniki|
|Połączeń|![Tak](./media/icons/yes-icon.png) Chmury komercyjne<br>![Nie](./media/icons/no-icon.png) National/suwerenne (US Gov, Chiny gov, inne gov)|
|||


## <a name="deploy-a-byol-solution-from-the-azure-portal"></a>Wdróż rozwiązanie BYOL z Azure Portal

Opcje BYOL odnoszą się do obsługiwanych rozwiązań do oceny luk w zabezpieczeniach innych firm. Obecnie zarówno Qualys, jak i Rapid7 są obsługiwanymi dostawcami.

Obsługiwane rozwiązania zgłaszają dane luk w zabezpieczeniach do platformy zarządzania partnera. Z kolei Ta platforma oferuje dane dotyczące luk i monitorowania kondycji z powrotem do Security Center. Można zidentyfikować podatne na ataki maszyny wirtualne na pulpicie nawigacyjnym Security Center i przełączyć się do konsoli zarządzania partnerem bezpośrednio z Security Center, aby uzyskać dodatkowe raporty i informacje.

1. W [Azure Portal](https://azure.microsoft.com/features/azure-portal/)Otwórz **Security Center**.

1. W menu Security Center Otwórz stronę **zalecenia** .

1. Wybierz rekomendacje **rozwiązanie do oceny luk w zabezpieczeniach na maszynach wirtualnych**.

    :::image type="content" source="./media/deploy-vulnerability-assessment-vm/recommendation-page-machine-groupings.png" alt-text="Grupy maszyn w programie * * rozwiązanie do oceny luk w zabezpieczeniach powinno być włączone na stronie rekomendacji na maszynach wirtualnych * *" lightbox="./media/deploy-vulnerability-assessment-vm/recommendation-page-machine-groupings.png":::

    Maszyny wirtualne będą widoczne w co najmniej jednej z następujących grup:

    * **Dobra kondycja** — Security Center wykryła rozwiązanie do oceny luk w zabezpieczeniach uruchomione na tych maszynach wirtualnych.
    * **Zasoby w złej kondycji** — rozszerzenie skanera o luki w zabezpieczeniach można wdrożyć na tych maszynach wirtualnych. 
    * **Nie dotyczy zasobów** — te maszyny wirtualne nie mogą mieć wdrożonego rozszerzenia skanera.

1. Z listy maszyn w złej kondycji wybierz te, które mają otrzymać rozwiązanie do oceny luk w zabezpieczeniach, a następnie wybierz pozycję **Koryguj**.

    >[!IMPORTANT]
    > W zależności od konfiguracji można zobaczyć tylko podzestaw tej listy. 
    >
    > - Jeśli nie masz skonfigurowanego skanera luk w zabezpieczeniach innych firm, nie będziesz mieć możliwości jego wdrożenia.
    > - Jeśli wybrane maszyny wirtualne nie są chronione za pomocą usługi Azure Defender, opcja skanera zintegrowanej usługi ASC jest niedostępna.

    :::image type="content" source="./media/deploy-vulnerability-assessment-vm/recommendation-remediation-options.png" alt-text="Grupy maszyn w programie * * rozwiązanie do oceny luk w zabezpieczeniach powinno być włączone na stronie rekomendacji na maszynach wirtualnych * *":::

1. Jeśli konfigurujesz nową konfigurację BYOL, wybierz pozycję **Konfiguruj nowy skaner luk w zabezpieczeniach**, wybierz odpowiednie rozszerzenie, wybierz pozycję **dalej**, a następnie wprowadź szczegóły dostawcy w następujący sposób:

    1. W obszarze **Grupa zasobów** wybierz pozycję **Użyj istniejącej**.
    1. W obszarze **Lokalizacja** wybierz miejsce, w którym rozwiązanie jest geograficznie usytuowane.
    1. W przypadku usługi Qualys wprowadź licencję dostarczoną przez Qualys w polu **kod licencji** .
    1. W przypadku usługi Rapid7 Przekaż **plik konfiguracyjny Rapid7**.
    1. W polu **klucz publiczny** wprowadź informacje o kluczu publicznym dostarczone przez partnera.
    1. Aby automatycznie zainstalować ten Agent oceny luk w zabezpieczeniach na wszystkich odnalezionych maszynach wirtualnych w ramach subskrypcji tego rozwiązania, wybierz pozycję **automatycznie Wdróż**.
    1. Wybierz przycisk **OK**.

1. Jeśli już skonfigurowano rozwiązanie BYOL, wybierz pozycję **Wdróż skonfigurowany skaner luk w zabezpieczeniach firmy**Microsoft, wybierz odpowiednie rozszerzenie i wybierz pozycję **Zastosuj**.

Po zainstalowaniu rozwiązania do oceny luk w zabezpieczeniach na komputerach docelowych Security Center wykonuje skanowanie w celu wykrycia i zidentyfikowania luk w zabezpieczeniach systemu i aplikacji. Pierwsze skanowanie może potrwać kilka godzin. Następnie jest uruchamiany co godzinę.



## <a name="deploy-a-byol-solution-using-powershell-and-the-rest-api"></a>Wdrażanie rozwiązania BYOL przy użyciu programu PowerShell i interfejsu API REST

Aby programowo wdrożyć własne, licencjonowane w sposób prywatny rozwiązanie do oceny luk w zabezpieczeniach z usługi [Qualys](https://www.qualys.com/lp/azure) lub [Rapid7](https://www.rapid7.com/products/insightvm/), użyj dostarczonego skryptu skrypt [> PowerShell](https://github.com/Azure/Azure-Security-Center/tree/master/Powershell%20scripts/Vulnerability%20Solution). Ten skrypt używa interfejsu API REST w celu utworzenia nowego rozwiązania zabezpieczeń w języku ASC. Wymagana jest licencja i klucz dostarczony przez dostawcę usług (Qualys lub Rapid7).

> [!IMPORTANT] 
> Dla każdej licencji można utworzyć tylko jedno rozwiązanie. Próba utworzenia innego rozwiązania przy użyciu tej samej nazwy/licencji/klucza zakończy się niepowodzeniem.

### <a name="prerequisites"></a>Wymagania wstępne

Wymagane moduły programu PowerShell:

- Install-module AZ
- Install-module AZ. Security

### <a name="run-the-script"></a>Uruchamianie skryptu

Aby uruchomić skrypt, potrzebne są odpowiednie informacje dotyczące parametrów poniżej.

| **Parametr** | **Wymagane** | **Uwagi** |
|----|:----:|----|
|**SubscriptionId**|✔|Identyfikator subskrypcji platformy Azure, która zawiera zasoby, które mają zostać poddane analizie.|
|**ResourceGroupName**|✔|Nazwa grupy zasobów. Użyj dowolnej istniejącej grupy zasobów, w tym domyślnej ("DefaultResourceGroup-XXX"). Ponieważ rozwiązanie nie jest zasobem platformy Azure, nie będzie ono wyświetlane w grupie zasobów, ale nadal jest dołączone do niego.|
|**vaSolutionName**|✔|Nazwa nowego rozwiązania.|
|**vaType**|✔|Qualys lub Rapid7.|
|**licenceCode**|✔|Ciąg licencji dostarczonej przez dostawcę.|
|**publicKey**|✔|Klucz publiczny podany przez dostawcę.|
|**autoUpdate**|-|Włącz (true) lub Disable (false) autodeploy dla tego rozwiązania. Po włączeniu każdej nowej maszyny wirtualnej w ramach subskrypcji zostanie automatycznie podjęta próba połączenia z rozwiązaniem.<br/>(Wartość domyślna: false)|
||||

Składnia:

```azurepowershell
.\New-ASCVASolution.ps1 -subscriptionId <Subscription Id> -resourceGroupName <RG Name>
-vaSolutionName <New solution name> -vaType <Qualys / Rapid7> -autoUpdate <true/false>
-licenceCode <License code from vendor> -publicKey <Public Key received from vendor>
```

Przykład (ten przykład nie zawiera prawidłowych informacji o licencji):

```azurepowershell
.\New-ASCVASolution.ps1 -subscriptionId 'f4cx1b69-dtgb-4ch6-6y6f-ea2e95373d3b' -resourceGroupName 'DefaultResourceGroup-WEU' -vaSolutionName 'QualysVa001' -vaType 'Qualys' -autoUpdate 'false' `
-licenceCode 'eyJjaWQiOiJkZDg5OTYzXe4iMTMzLWM4NTAtODM5FD2mZWM1N2Q3ZGU5MjgiLCJgbTYuOiIyMmM5NDg3MS1lNTVkLTQ1OGItYjhlMC03OTRhMmM3YWM1ZGQiLCJwd3NVcmwiOiJodHRwczovL3FhZ3B1YmxpYy1wMDEuaW50LnF1YWx5cy5jb20vQ2xvdSKJY6VudC8iLCJwd3NQb3J0IjoiNDQzIn0=' `
-publicKey 'MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCOiOLXjOywMfLZIBGPZLwSocf1Q64GASLK9OHFEmanBl1nkJhZDrZ4YD5lM98fThYbAx1Rde2iYV1ze/wDlX4cIvFAyXuN7HbdkeIlBl6vWXEBZpUU17bOdJOUGolzEzNBhtxi/elEZLghq9Chmah82me/okGMIhJJsCiTtglVQIDAQAB'
```

## <a name="next-steps"></a>Następne kroki

> [!div class="nextstepaction"]
> [Koryguj wyniki z rozwiązania do oceny luk w zabezpieczeniach](remediate-vulnerability-findings-vm.md)


Security Center oferuje również analizę luk w zabezpieczeniach dla:

- Bazy danych SQL — zobacz [Eksplorowanie raportów oceny luk w zabezpieczeniach na pulpicie nawigacyjnym oceny luk w zabezpieczeniach](defender-for-sql-usage.md#explore-vulnerability-assessment-reports)
- Obrazy Azure Container Registry — zobacz [Korzystanie z usługi Azure Defender dla rejestrów kontenerów do skanowania obrazów pod kątem luk w zabezpieczeniach](defender-for-container-registries-usage.md)