---
title: Przewodnik dotyczący reguł oceny luk w zabezpieczeniach SQL
description: Lista tytułów i opisów reguł dla SQL Server, Azure SQL Database, wystąpienia zarządzanego Azure SQL i usługi Azure Synapse Analytics
services: sql-database
ms.service: sql-db-mi
ms.subservice: security
ms.topic: reference
author: barmichal
ms.author: mibar
ms.reviewer: vanto
ms.date: 12/14/2020
ms.openlocfilehash: aa14c8e4d22f5eb965e9d7960bced8029b7636ea
ms.sourcegitcommit: cc13f3fc9b8d309986409276b48ffb77953f4458
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 12/14/2020
ms.locfileid: "97401257"
---
# <a name="sql-vulnerability-assessment-rules-reference-guide"></a>Przewodnik dotyczący reguł oceny luk w zabezpieczeniach SQL
[!INCLUDE[appliesto-sqldb-sqlmi-asa](../includes/appliesto-sqldb-sqlmi-asa.md)]

W tym artykule przedstawiono zestaw wbudowanych reguł, które służą do flagowania luk w zabezpieczeniach i wyróżniania odchyleń od najlepszych rozwiązań, takich jak niepomyślne konfiguracje, nadmierne uprawnienia i niechronione dane poufne. Zasady są oparte na najlepszych rozwiązaniach firmy Microsoft i koncentrują się na problemach z bezpieczeństwem, które stanowią największe ryzyko dla bazy danych i jej cennych danych. Obejmują zarówno problemy na poziomie bazy danych, jak i problemy z zabezpieczeniami na poziomie serwera, takie jak ustawienia zapory serwera i uprawnienia na poziomie serwera. Te reguły reprezentują także wiele wymagań z różnych organów regulacyjnych w celu spełnienia ich standardów zgodności.

Reguły wyświetlane w ramach skanowania bazy danych zależą od wersji programu SQL i platformy, która została przeskanowana. 

Aby dowiedzieć się, jak zaimplementować ocenę luk w zabezpieczeniach na platformie Azure, zobacz [implementacja oceny luk w zabezpieczeniach](./sql-vulnerability-assessment.md#implement-vulnerability-assessment).

Aby zapoznać się z listą zmian tych reguł, zobacz [Dziennik zmian reguł oceny luk w zabezpieczeniach SQL](sql-database-vulnerability-assessment-rules-changelog.md).

## <a name="rule-categories"></a>Kategorie zasad

Reguły oceny luk w zabezpieczeniach SQL mają pięć kategorii, które znajdują się w następujących sekcjach:

- [Uwierzytelnianie i autoryzacja](#authentication-and-authorization)
- [Inspekcja i rejestrowanie](#auditing-and-logging)
- [Ochrona danych](#data-protection)
- [Aktualizacje i poprawki instalacji](#installation-updates-and-patches)
- [Zmniejszenie obszaru powierzchni](#surface-area-reduction)

<sup>1</sup> **SQL Server 2012** i odnosi się do wszystkich wersji SQL Server 2012 i nowszych.

<sup>2</sup> **SQL Server 2017** i odnosi się do wszystkich wersji SQL Server 2017 i nowszych.

<sup>3</sup> **SQL Server 2016** i odnosi się do wszystkich wersji SQL Server 2016 i nowszych.

## <a name="authentication-and-authorization"></a>Uwierzytelnianie i autoryzacja

|Identyfikator zasady  |Tytuł reguły   |Ważność reguły  |Opis reguły  |Platforma  |
|---------|---------|---------|---------|---------|
| VA1017     |Uprawnienia do wykonywania dotyczące xp_cmdshell ze wszystkich użytkowników (z wyjątkiem właściciela) powinny zostać odwołane          |Wysoki         |Rozszerzona procedura składowana xp_cmdshell duplikuje powłokę poleceń systemu Windows, przekazując ciąg do wykonania. Ta reguła sprawdza, czy żaden użytkownik (inny niż użytkownicy z uprawnieniem serwer KONTROLny, taki jak członkowie roli serwera sysadmin) ma uprawnienia do wykonywania xp_cmdshell rozszerzonej procedury składowanej.         |<nobr>SQL Server 2012 +<sup>1</sup><nobr/>         |
|VA1020     |Gość użytkownika bazy danych nie powinien być członkiem żadnej roli          |Wysoki         |Użytkownik-Gość zezwala na dostęp do bazy danych dla wszelkich logowań, które nie są zamapowane do określonego użytkownika bazy danych. Ta reguła sprawdza, czy żadne role bazy danych nie są przypisane do użytkownika-gościa.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1042     |Dla wszystkich baz danych z wyjątkiem dla `master` , `msdb` i `tempdb`          |Wysoki         |Tworzenie łańcucha własności między bazami danych jest rozszerzeniem łańcucha własności, z wyjątkiem przekroczenia granicy bazy danych. Ta reguła sprawdza, czy ta opcja jest wyłączona dla wszystkich baz danych z wyjątkiem dla `master` , `msdb` i `tempdb` . W przypadku `master` , `msdb` i `tempdb` , tworzenie łańcucha własności między bazami danych jest domyślnie włączone.        |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL         |
|VA1043     |Gość podmiotu zabezpieczeń nie powinien mieć dostępu do żadnej bazy danych użytkownika          |Średniaa         |Użytkownik-Gość zezwala na dostęp do bazy danych dla wszelkich logowań, które nie są zamapowane do określonego użytkownika bazy danych. Ta reguła sprawdza, czy użytkownik-Gość nie może nawiązać połączenia z żadną bazą danych.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL        |
|VA1046     |CHECK_POLICY powinna być włączona dla wszystkich nazw logowania SQL          |Niski         |Opcja CHECK_POLICY umożliwia Weryfikowanie nazw logowania SQL względem zasad domeny. Ta reguła sprawdza, czy opcja CHECK_POLICY jest włączona dla wszystkich nazw logowania SQL.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL         |
|VA1047     |Należy włączyć sprawdzanie ważności hasła dla wszystkich nazw logowania SQL          |Niski         |Zasady wygasania haseł są używane do zarządzania cykl życia hasła. Gdy SQL Server wymusza zasady wygasania haseł, użytkownicy są zapomnieć o zmianie starych haseł, a konta z wygasłymi hasłami zostaną wyłączone. Ta reguła sprawdza, czy dla wszystkich logowań SQL włączono zasady wygasania haseł.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL         |
|VA1048     |Podmioty zabezpieczeń bazy danych nie powinny być mapowane na `sa` konto          |Wysoki         |Podmiotowi zabezpieczeń bazy danych, który jest mapowany na `sa` konto, może być wykorzystywany przez osobę atakującą w celu podniesienia uprawnień do programu `sysadmin`         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL         |
|VA1052     |Usuń Builtin\administratorzy jako nazwę logowania serwera          |Niski         |Grupa Builtin\administratorzy zawiera grupę lokalnych administratorów systemu Windows. W starszych wersjach Microsoft SQL Server ta grupa ma uprawnienia administratora domyślnie. Ta reguła sprawdza, czy ta grupa została usunięta z SQL Server.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1053     |Należy zmienić nazwę konta o nazwie domyślnej `sa` lub wyłączyć          |Niski         |`sa` to dobrze znane konto o IDENTYFIKATORze podmiotu zabezpieczeń 1. Ta reguła sprawdza, czy `sa` zmieniono nazwę konta lub została ona wyłączona.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL         |
|VA1054     |Nie należy przyznawać nadmiernych uprawnień do roli publicznej w obiektach lub kolumnach          |Niski         |Każda SQL Server logowania należy do roli serwera publicznego. Gdy podmiotowi zabezpieczeń serwera nie udzielono lub nie odmówiono określonych uprawnień do zabezpieczanego obiektu, użytkownik dziedziczy uprawnienia przyznane publicznemu obiektowi. Ta reguła umożliwia wyświetlenie listy wszystkich zabezpieczanych obiektów lub kolumn, które są dostępne dla wszystkich użytkowników za pomocą roli publicznej.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1058     |`sa` Logowanie powinno być wyłączone          |Wysoki         |`sa` to dobrze znane konto o IDENTYFIKATORze podmiotu zabezpieczeń 1. Ta reguła sprawdza, czy `sa` konto jest wyłączone.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL         |
|VA1059     |xp_cmdshell powinna być wyłączona          |Wysoki         |xp_cmdshell powoduje zduplikowanie powłoki poleceń systemu Windows i przekazanie jej ciągu do wykonania. Ta reguła sprawdza, czy xp_cmdshell jest wyłączona.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL         |
|VA1067     |Poczta bazy danych XPs powinna być wyłączona, gdy nie jest używana          |Średniaa         |Ta reguła sprawdza, czy Poczta bazy danych jest wyłączona, gdy nie jest skonfigurowany profil poczty bazy danych. Poczta bazy danych może służyć do wysyłania wiadomości e-mail z aparatu bazy danych SQL Server i jest domyślnie wyłączona. Jeśli ta funkcja nie jest używana, zaleca się jej wyłączenie w celu zmniejszenia obszaru powierzchni.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1068     |Nie należy przyznawać uprawnień serwera bezpośrednio podmiotom głównym          |Niski         |Uprawnienia na poziomie serwera są skojarzone z obiektem poziomu serwera, aby określać, którzy użytkownicy mogą uzyskać dostęp do obiektu. Ta reguła sprawdza, czy nie ma uprawnień na poziomie serwera przyznanych bezpośrednio do nazw logowania.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL         |
|VA1070     |Użytkownicy bazy danych nie powinni mieć takiej samej nazwy jak nazwa logowania serwera          |Niski         |Użytkownicy bazy danych mogą mieć taką samą nazwę jak nazwa logowania serwera. Ta reguła sprawdza, czy nie ma takich użytkowników.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL         |
|VA1072     |Tryb uwierzytelniania powinien być uwierzytelnianiem systemu Windows          |Średniaa         |Istnieją dwa możliwe tryby uwierzytelniania: tryb uwierzytelniania systemu Windows i tryb mieszany. Tryb mieszany oznacza, że SQL Server włącza zarówno uwierzytelnianie systemu Windows, jak i uwierzytelnianie SQL Server. Ta reguła sprawdza, czy tryb uwierzytelniania jest ustawiony na uwierzytelnianie systemu Windows.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1094     |Uprawnienia bazy danych nie powinny być udzielane bezpośrednio podmiotom głównym          |Niski         |Uprawnienia są regułami skojarzonymi z zabezpieczanym obiektem, aby określać, którzy użytkownicy mogą uzyskać dostęp do obiektu. Ta reguła sprawdza, czy nie przyznano bezpośrednio użytkownikom uprawnień bazy danych.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL         |
|VA1095     |Nie należy przyznawać nadmiernych uprawnień do roli publicznej          |Średniaa         |Każda SQL Server logowania należy do roli serwera publicznego. Gdy podmiotowi zabezpieczeń serwera nie udzielono lub nie odmówiono określonych uprawnień do zabezpieczanego obiektu, użytkownik dziedziczy uprawnienia przyznane publicznemu obiektowi. Zostanie wyświetlona lista wszystkich uprawnień przyznanych roli publicznej.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL         |
|VA1096     |GOŚCIom podmiotu zabezpieczeń nie należy przyznawać uprawnień w bazie danych          |Niski         |Każda baza danych zawiera użytkownika o nazwie gość. Uprawnienia przyznane GOŚCIu są dziedziczone przez użytkowników, którzy mają dostęp do bazy danych, ale nie mają konta użytkownika w bazie danych programu. Ta reguła sprawdza, czy wszystkie uprawnienia zostały odwołane dla użytkownika-GOŚCIa.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL         |
|VA1097     |Gość nie powinien mieć uprawnień do obiektów lub kolumn          |Niski         |Każda baza danych zawiera użytkownika o nazwie gość. Uprawnienia przyznane GOŚCIu są dziedziczone przez użytkowników, którzy mają dostęp do bazy danych, ale nie mają konta użytkownika w bazie danych programu. Ta reguła sprawdza, czy wszystkie uprawnienia zostały odwołane dla użytkownika-GOŚCIa.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL         |
|VA1099     |Użytkownik-Gość nie powinien mieć uprawnień do zabezpieczanych baz danych          |Niski         |Każda baza danych zawiera użytkownika o nazwie gość. Uprawnienia przyznane GOŚCIu są dziedziczone przez użytkowników, którzy mają dostęp do bazy danych, ale nie mają konta użytkownika w bazie danych programu. Ta reguła sprawdza, czy wszystkie uprawnienia zostały odwołane dla użytkownika-GOŚCIa.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL         |
|VA1246     |Ról aplikacji nie należy używać          |Niski         |Rola aplikacji jest podmiotem zabezpieczeń bazy danych, który umożliwia aplikacji działanie z własnymi uprawnieniami podobnymi do użytkownika. Role aplikacji umożliwiają dostęp do określonych danych tylko użytkownikom nawiązującym połączenie za pomocą określonej aplikacji. Role aplikacji są oparte na hasłach (aplikacje zwykle umieszczaj), a nie na podstawie tego, które ujawniają bazę danych do personifikacji roli aplikacji przez zgadywanie hasła. Ta reguła sprawdza, czy w bazie danych nie są zdefiniowane żadne role aplikacji.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL<br/><br/>SQL Database         |
|VA1248     |Role bazy danych zdefiniowane przez użytkownika nie powinny być elementami członkowskimi stałych ról          |Średniaa         |Aby łatwo zarządzać uprawnieniami w bazach danych SQL Server oferuje kilka ról, które są podmiotami zabezpieczeń, które grupują inne podmioty. Są one podobne do grup w systemie operacyjnym Microsoft Windows. Konta bazy danych i inne role SQL Server można dodawać do ról na poziomie bazy danych. Każdy członek stałej roli bazy danych może dodawać innych użytkowników do tej samej roli. Ta reguła sprawdza, czy żadne role zdefiniowane przez użytkownika nie są członkami stałych ról.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA1267     |Zawarti użytkownicy powinni używać uwierzytelniania systemu Windows          |Średniaa         |Zawarti użytkownicy są użytkownikami, którzy istnieją w bazie danych i nie wymagają mapowania logowania. Ta reguła sprawdza, czy zawarti użytkownicy korzystają z uwierzytelniania systemu Windows.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL         |
|VA1280     |Uprawnienia serwera przyznane do publicznej powinny być zminimalizowane          |Średniaa         |Każda SQL Server logowania należy do roli serwera publicznego. Gdy podmiotowi zabezpieczeń serwera nie udzielono lub nie odmówiono określonych uprawnień do zabezpieczanego obiektu, użytkownik dziedziczy uprawnienia przyznane publicznemu obiektowi. Ta reguła sprawdza, czy uprawnienia serwera przyznane na publiczne są zminimalizowane.          |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL         |
|VA1282     |Należy usunąć oddzielone role          |Niski         |Oddzielone role to role zdefiniowane przez użytkownika, które nie mają żadnych elementów członkowskich. Eliminowanie oddzielonych ról, ponieważ nie są one wymagane w systemie. Ta reguła sprawdza, czy istnieją oddzielone role.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA2020     |Minimalny zestaw podmiotów zabezpieczeń powinien mieć przyznane zmiany lub zmiany wszystkich uprawnień do zakresu bazy danych użytkownika          |Wysoki         |Każde SQL Server zabezpieczane ma przypisane uprawnienia, które mogą być przydzielone do podmiotów głównych. Uprawnienia mogą być ograniczone do zakresu serwera (przypisane do identyfikatorów logowania i ról serwera) lub na poziomie bazy danych (przypisane do użytkowników bazy danych i ról bazy danych). Te reguły sprawdzają, że tylko minimalny zestaw podmiotów zabezpieczeń otrzymuje zmiany lub zmiany w zakresie uprawnień do zakresu bazy danych użytkownika.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA2033     |Minimalny zestaw podmiotów zabezpieczeń powinien mieć przyznane uprawnienie EXECUTE z zakresem bazy danych dla obiektów lub kolumn          |Niski         |Ta reguła sprawdza, które podmioty zabezpieczeń mają przyznane uprawnienia do wykonywania dla obiektów lub kolumn, aby upewnić się, że to uprawnienie jest przyznawane minimalnym zestawom podmiotów. Każde SQL Server zabezpieczane ma przypisane uprawnienia, które mogą być przydzielone do podmiotów głównych. Uprawnienia mogą być ograniczone do zakresu na poziomie serwera (przypisane do identyfikatorów logowania i ról serwera) lub na poziomie bazy danych (przypisane do użytkowników bazy danych, ról baz danych lub ról aplikacji). Uprawnienie EXECUTE ma zastosowanie do obu procedur składowanych i funkcji skalarnych, które mogą być używane w kolumnach obliczanych.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA2103     |Niepotrzebne uprawnienia do wykonywania w rozszerzonych procedurach składowanych powinny zostać odwołane          |Średniaa         |Rozszerzone procedury składowane to biblioteki DLL, które można dynamicznie ładować i uruchamiać wystąpienie SQL Server. SQL Server jest spakowany z wieloma rozszerzonymi procedurami składowanymi, które umożliwiają interakcję z systemowymi bibliotekami DLL. Ta reguła sprawdza, czy niepotrzebne uprawnienia do wykonywania w rozszerzonych procedurach składowanych zostały odwołane.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL         |
|VA2107     |Minimalny zestaw podmiotów zabezpieczeń powinien być członkiem stałej roli bazy danych usługi Azure SQL DB          |Wysoki         |SQL Database udostępnia dwie role administracyjne z ograniczeniami w bazie danych Master, do których można dodać konta użytkowników, które przyznają uprawnienia do tworzenia baz danych lub zarządzania nazwami logowania. Ta reguła sprawdza, czy minimalny zestaw podmiotów zabezpieczeń jest członkiem tych ról administracyjnych.         |<nobr/>SQL Database<br/><br/>Azure Synapse         |
|VA2108     |Minimalny zestaw podmiotów zabezpieczeń powinien być członkiem stałych ról bazy danych o stałym wpływie          |Wysoki         |SQL Server udostępnia role ułatwiające zarządzanie uprawnieniami. Role są podmiotami zabezpieczeń, które grupują inne podmioty główne. Role na poziomie bazy danych są w zakresie uprawnień całej bazy danych. Ta reguła sprawdza, czy minimalny zestaw podmiotów zabezpieczeń jest członkiem stałej roli bazy danych.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA2109     |Minimalny zestaw podmiotów zabezpieczeń powinien być członkiem stałych ról bazy danych o stałym wpływie          |Niski         |SQL Server udostępnia role ułatwiające zarządzanie uprawnieniami. Role są podmiotami zabezpieczeń, które grupują inne podmioty główne. Role na poziomie bazy danych są w zakresie uprawnień całej bazy danych. Ta reguła sprawdza, czy minimalny zestaw podmiotów zabezpieczeń jest członkiem stałej roli bazy danych.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA2110     |Należy odwołać uprawnienia do wykonywania w celu uzyskania dostępu do rejestru          |Wysoki         |Rozszerzone procedury składowane rejestru umożliwiają Microsoft SQL Server odczytywanie zapisów i wyliczanie wartości i kluczy w rejestrze. Są one używane przez program Enterprise Manager do konfigurowania serwera. Ta reguła sprawdza, czy uprawnienia do wykonywania rozszerzonych procedur składowanych rejestru zostały odwołane dla wszystkich użytkowników (poza dbo).         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL         |
|VA2113     |Uprawnienia usług Data Transformation Services (DTS) powinny być udzielane tylko rolom SSIS          |Średniaa         |Usługi Data Transformation Services (DTS) to zestaw obiektów i narzędzi, które umożliwiają automatyzację operacji wyodrębniania, przekształcania i ładowania do bazy danych lub z niej. Obiekty są pakietami DTS i ich składnikami, a narzędzia te są nazywane narzędziami DTS. Ta reguła sprawdza, czy tylko role SSIS mają przyznane uprawnienia do korzystania z procedur składowanych w systemie DTS i uprawnienia dla roli publicznej do korzystania z procedur składowanych w systemie usług DTS zostały odwołane.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL         |
|VA2114     |Minimalny zestaw podmiotów zabezpieczeń powinien być członkiem stałych ról serwera o dużym wpływie          |Wysoki         |SQL Server udostępnia role ułatwiające zarządzanie uprawnieniami. Role są podmiotami zabezpieczeń, które grupują inne podmioty główne. Role na poziomie serwera są w zakresie uprawnień całego serwera. Ta reguła sprawdza, czy minimalny zestaw podmiotów zabezpieczeń jest członkiem stałych ról serwera.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL         |
|VA2129     |Zmiany w podpisanych modułach powinny być autoryzowane          |Wysoki         |Można podpisywać procedurę składowaną, funkcję lub wyzwalacz za pomocą certyfikatu lub klucza asymetrycznego. Jest to przeznaczone do scenariuszy, gdy uprawnienia nie mogą być dziedziczone przez tworzenie łańcucha własności lub w przypadku zerwania łańcucha własności, na przykład dynamicznego języka SQL. Ta reguła sprawdza, czy wprowadzono zmiany w podpisanych modułach, które mogą wskazywać na złośliwe użycie.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Baza danych SQL<br/><br/>Wystąpienie zarządzane SQL         |
|VA2130     |Śledź wszystkich użytkowników mających dostęp do bazy danych          |Niski         |To sprawdzenie śledzi wszystkich użytkowników mających dostęp do bazy danych. Upewnij się, że Ci użytkownicy są autoryzowani zgodnie z ich bieżącą rolą w organizacji.         |<nobr>SQL Database<nobr/><br/><br/>Azure Synapse         |

## <a name="auditing-and-logging"></a>Inspekcja i rejestrowanie

|Identyfikator zasady  |Tytuł reguły  |Ważność reguły  |Opis reguły  |Platforma  |
|---------|---------|---------|---------|---------|
|VA1045     |Należy włączyć śledzenie domyślne          |Średniaa         |Domyślne śledzenie zapewnia pomoc dotyczącą rozwiązywania problemów administratorom baz danych, upewniając się, że mają one dane dziennika niezbędne do diagnozowania problemów podczas pierwszego wystąpienia. Ta reguła sprawdza, czy śledzenie domyślne jest włączone.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL         |
|VA1091     |Inspekcja zarówno pomyślnych, jak i nieudanych prób logowania (śledzenie domyślne) powinna być włączona w przypadku skonfigurowania funkcji "Inspekcja logowania" do śledzenia nazw logowania          |Niski         |SQL Server Konfiguracja inspekcji logowania umożliwia administratorom śledzenie użytkowników logujących się do SQL Server wystąpień. Jeśli użytkownik zdecyduje się na użycie opcji "Inspekcja logowania" w celu śledzenia użytkowników logujących się do wystąpień SQL Server, należy włączyć ją zarówno w przypadku pomyślnego, jak i nieudanych prób logowania.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1093     |Maksymalna liczba dzienników błędów powinna wynosić co najmniej 12          |Niski         |Każdy SQL Server dziennik błędów będzie zawierał wszystkie informacje dotyczące błędów/błędów, które wystąpiły od czasu ostatniego ponownego uruchomienia SQL Server lub od momentu ostatniego odtworzenia dzienników błędów. Ta reguła sprawdza, czy Maksymalna liczba dzienników błędów wynosi 12 lub więcej.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1258     |Właściciele bazy danych są zgodnie z oczekiwaniami          |Wysoki         |Właściciele bazy danych mogą wykonywać wszystkie działania związane z konfiguracją i konserwacją w bazie danych, a także usuwać bazy danych w SQL Server. Właściciele bazy danych śledzenia mają duże znaczenie, aby uniknąć nadmiernego uprawnienia do niektórych podmiotów zabezpieczeń. Utwórz linię bazową, która definiuje oczekiwanych właścicieli bazy danych dla bazy danych. Ta reguła sprawdza, czy właściciele bazy danych są zdefiniowani w linii bazowej.         |<nobr>SQL Server 2016 +<sup>3</sup><nobr/><br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA1264     |Należy włączyć inspekcję zarówno pomyślnych, jak i nieudanych prób logowania          |Niski         |Konfiguracja inspekcji SQL Server umożliwia administratorom śledzenie użytkowników logujących się do SQL Server wystąpień, w których są odpowiedzialni. Ta reguła sprawdza, czy inspekcja jest włączona zarówno w przypadku pomyślnego, jak i nieudanych prób logowania.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL         |
|VA1265     |Należy włączyć inspekcję zarówno pomyślnych, jak i nieudanych prób logowania dla zawartego uwierzytelniania bazy danych          |Średniaa         |Konfiguracja inspekcji SQL Server umożliwia administratorom śledzenie rejestrowania użytkowników w SQL Server wystąpieniach, w których są odpowiedzialni. Ta reguła sprawdza, czy włączono funkcję inspekcji dla pomyślnych i nieudanych prób logowania dla zawartego uwierzytelniania bazy danych.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL         |
|VA1281     |Wszystkie członkostwa ról zdefiniowanych przez użytkownika powinny być przeznaczone          |Średniaa         |Role zdefiniowane przez użytkownika są podmiotami zabezpieczeń zdefiniowanymi przez użytkownika do grupowania podmiotów głównych w celu łatwego zarządzania uprawnieniami. Monitorowanie tych ról jest ważne, aby uniknąć nadmiernych uprawnień. Utwórz linię bazową, która definiuje oczekiwane członkostwo dla każdej roli zdefiniowanej przez użytkownika. Ta reguła sprawdza, czy wszystkie członkostwa ról zdefiniowanych przez użytkownika są zdefiniowane w linii bazowej.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA1283     |W systemie powinna istnieć co najmniej 1 aktywna Inspekcja          |Niski         |Inspekcja wystąpienia aparatu bazy danych SQL Server lub pojedynczej bazy danych obejmuje śledzenie i rejestrowanie zdarzeń występujących w aparacie bazy danych. Obiekt inspekcji SQL Server zbiera pojedyncze wystąpienie operacji na poziomie serwera lub bazy danych i grupy akcji do monitorowania. Ta reguła sprawdza, czy w systemie istnieje co najmniej jedna aktywna Inspekcja.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL         |
|VA2061     |Inspekcja powinna być włączona na poziomie serwera          |Wysoki         |Inspekcja Azure SQL Database śledzi zdarzenia bazy danych i zapisuje je w dzienniku inspekcji na koncie usługi Azure Storage. Inspekcja pomaga zrozumieć aktywność bazy danych i uzyskać wgląd w niezgodności i anomalie, które mogą wskazywać na problemy biznesowe lub podejrzane naruszenia zabezpieczeń, a także ułatwiają spełnienie zgodności z przepisami. Aby uzyskać więcej informacji, zobacz temat [Inspekcja usługi Azure SQL](https://docs.microsoft.com/azure/sql-database/sql-database-auditing). Ta reguła sprawdza, czy inspekcja jest włączona.         |<nobr/>SQL Database<br/><br/>Azure Synapse          |

## <a name="data-protection"></a>Ochrona danych

|Identyfikator zasady  |Tytuł reguły  |Ważność reguły  |Opis reguły  |Platforma  |
|---------|---------|---------|---------|---------|
|VA1098     |Wszystkie istniejące punkty końcowe SSB lub dublowania powinny wymagać połączenia AES          |Wysoki         |Punkty końcowe Service Broker i dublowania obsługują różne algorytmy szyfrowania, w tym nie szyfrowanie. Ta reguła sprawdza, czy wszystkie istniejące punkty końcowe wymagają szyfrowania AES.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1219     |Należy włączyć funkcję przezroczystego szyfrowania danych.          |Średniaa         |Przezroczyste szyfrowanie danych (TDE) pomaga chronić pliki bazy danych przed ujawnieniem informacji przez wykonywanie szyfrowania w czasie rzeczywistym i odszyfrowywanie bazy danych, skojarzonych kopii zapasowych i plików dziennika transakcji w stanie spoczynku, bez konieczności wprowadzania zmian w aplikacji. Ta reguła sprawdza, czy TDE jest włączona w bazie danych.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA1220     |Komunikacja z bazą danych przy użyciu TDS powinna być chroniona za pośrednictwem protokołu TLS          |Wysoki         |Microsoft SQL Server może używać SSL (SSL) lub Transport Layer Security (TLS) do szyfrowania danych przesyłanych przez sieć między wystąpieniem SQL Server a aplikacją kliencką. Ta reguła sprawdza, czy wszystkie połączenia z SQL Server są szyfrowane za pomocą protokołu TLS.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL         |
|VA1221     |Klucze symetryczne szyfrowania bazy danych powinny używać algorytmu AES          |Wysoki         |SQL Server używa kluczy szyfrowania, aby zabezpieczyć poświadczenia danych i informacje o połączeniu, które są przechowywane w bazie danych serwera. SQL Server ma dwa rodzaje kluczy: symetryczne i asymetryczne. Ta reguła sprawdza, czy klucze symetryczne szyfrowania bazy danych używają algorytmu AES.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA1222     |Klucze szyfrowania Cell-Level powinny używać algorytmu AES          |Wysoki         |Cell-Level Encryption (CLE) umożliwia szyfrowanie danych przy użyciu kluczy symetrycznych i asymetrycznych. Ta reguła sprawdza, czy klucze symetryczne szyfrowania Cell-Level używają algorytmu AES.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL         |
|VA1223     |Klucze certyfikatów powinny używać co najmniej 2048 bitów          |Wysoki         |Klucze certyfikatów są używane w RSA i inne algorytmy szyfrowania do ochrony danych. Te klucze muszą mieć wystarczającą długość, aby zabezpieczyć dane użytkownika. Ta reguła sprawdza, czy długość klucza wynosi co najmniej 2048 bitów dla wszystkich certyfikatów.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA1224     |Długość klucza asymetrycznego musi wynosić co najmniej 2048 bitów          |Wysoki         |Klucze asymetryczne bazy danych są używane w wielu algorytmach szyfrowania, których klucze muszą mieć wystarczającą długość, aby zabezpieczyć dane zaszyfrowane. Ta reguła sprawdza, czy wszystkie klucze asymetryczne przechowywane w bazie danych mają długość co najmniej 2048 bitów.         |<nobr>SQL Server 2012<nobr/><br/><br/><nobr>SQL Server 2014<nobr/><br/><br/>SQL Database         |
|VA1279     |Wymuś szyfrowanie dla TDS          |Wysoki         |Gdy opcja Wymuś szyfrowanie dla aparatu bazy danych jest włączona, cała komunikacja między klientem a serwerem jest zaszyfrowana niezależnie od tego, czy jest zaznaczona opcja "Szyfruj połączenie" (na przykład z programu SSMS). Ta reguła sprawdza, czy opcja wymuszania szyfrowania jest włączona.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1288     |Kolumny danych poufnych należy klasyfikować          |Średniaa         |Ta reguła sprawdza, czy zeskanowana baza danych ma potencjalnie poufne dane, które nie zostały sklasyfikowane.         |<nobr/>SQL Database         |
|VA2060     |Wykrywanie zagrożeń SQL powinno być włączone na poziomie serwera          |Średniaa         |Funkcja wykrywania zagrożeń SQL zapewnia warstwę zabezpieczeń, która wykrywa potencjalne luki w zabezpieczeniach i nietypowe działania w bazach danych, takich jak ataki iniekcji SQL i nietypowe wzorce zachowań. W przypadku wykrycia potencjalnego zagrożenia wykrywanie zagrożeń wysyła alert w czasie rzeczywistym do działania za pośrednictwem poczty e-mail i w Azure Security Center, co obejmuje jasne postępowanie i rozwiązywanie problemów związanych z konkretnym zagrożeniem. Aby uzyskać więcej informacji, zobacz [Konfigurowanie wykrywania zagrożeń](https://docs.microsoft.com/azure/sql-database/sql-database-threat-detection). To sprawdzenie sprawdza, czy jest włączone wykrywanie zagrożeń SQL         |<nobr/><br/>Wystąpienie zarządzane SQL<br/><br/>SQL Database<br/><br/>Azure Synapse         |

## <a name="installation-updates-and-patches"></a>Aktualizacje i poprawki instalacji

|Identyfikator zasady  |Tytuł reguły  |Ważność reguły  |Opis reguły  |Platforma  |
|---------|---------|---------|---------|---------|
| VA1018     |Należy zainstalować najnowsze aktualizacje          |Wysoki         |Firma Microsoft okresowo zwalnia aktualizacje zbiorcze (CUs) dla każdej wersji SQL Server. Ta reguła sprawdza, czy została zainstalowana najnowsza wersja usługi CU dla określonej używanej wersji SQL Server przez przekazanie ciągu do wykonania. Ta reguła sprawdza, czy wszyscy użytkownicy (z wyjątkiem dbo) nie mają uprawnień do wykonywania xp_cmdshell rozszerzonej procedury składowanej. |<nobr>SQL Server 2005<nobr/><br/><br/><nobr>SQL Server 2008<nobr/><br/><br/><nobr>SQL Server 2008<nobr/><br/><br/><nobr>SQL Server 2012<nobr/><br/><br/><nobr>SQL Server 2014<nobr/><br/><br/><nobr>SQL Server 2016<nobr/><br/><br/>SQL Server 2017<br/>|
|VA2128     |Ocena luk w zabezpieczeniach nie jest obsługiwana w przypadku wersji SQL Server mniejszych niż SQL Server 2012          |Wysoki         |Aby uruchomić skanowanie oceny luk w zabezpieczeniach na SQL Server należy uaktualnić serwer do wersji SQL Server 2012 lub nowszej, SQL Server 2008 R2 i poniżej nie są już obsługiwane przez firmę Microsoft. Aby uzyskać więcej informacji, zobacz <https://www.microsoft.com/cloud-platform/windows-sql-server-2008>.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL<br/><br/>SQL Database<br/><br/>Azure Synapse         |

## <a name="surface-area-reduction"></a>Zmniejszenie obszaru powierzchni

|Identyfikator zasady  |Tytuł reguły  |Ważność reguły  |Opis reguły  |Platforma  |
|---------|---------|---------|---------|---------|
|VA1022     |Zapytania rozproszone ad hoc powinny być wyłączone          |Średniaa         |Zapytania rozproszone ad hoc używają `OPENROWSET` funkcji i `OPENDATASOURCE` do nawiązywania połączeń ze zdalnymi źródłami danych, które używają OLE DB. Ta reguła sprawdza, czy rozproszone zapytania ad hoc są wyłączone.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1023     |Środowisko CLR powinno być wyłączone          |Wysoki         |Środowisko CLR pozwala hostować kod zarządzany i uruchamiać go w środowisku Microsoft SQL Server. Ta reguła sprawdza, czy środowisko CLR jest wyłączone.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1026     |Środowisko CLR powinno być wyłączone          |Średniaa         |Środowisko CLR pozwala hostować kod zarządzany i uruchamiać go w środowisku Microsoft SQL Server. Środowisko CLR Strict Security traktuje bezpieczne i EXTERNAL_ACCESS zestawy, tak jakby były oznaczone jako niebezpieczne i wymagają, aby wszystkie zestawy były podpisane przy użyciu certyfikatu lub klucza asymetrycznego z odpowiednią nazwą logowania, której udzielono uprawnienia do niebezpiecznego zestawu w bazie danych Master. Ta reguła sprawdza, czy środowisko CLR jest wyłączone.         |<nobr>SQL Server 2017 +<sup>2</sup><nobr/><br/><br/>Wystąpienie zarządzane SQL         |
|VA1027     |Nie można usunąć nieśledzonych zaufanych zestawów          |Wysoki         |Zestawy oznaczone jako niebezpieczne muszą być podpisane za pomocą certyfikatu lub klucza asymetrycznego z odpowiednią nazwą logowania, której udzielono uprawnienia do niebezpiecznego zestawu w bazie danych Master. Zaufane zestawy mogą ominąć to wymaganie.          |<nobr>SQL Server 2017 +<nobr/><br/><br/>Wystąpienie zarządzane SQL         |
|VA1044     |Połączenia administratora zdalnego powinny być wyłączone, chyba że jest to wymagane.          |Średniaa         |Ta reguła sprawdza, czy zdalne dedykowane połączenia administratora są wyłączone, jeśli nie są używane do klastrowania w celu zmniejszenia obszaru ataków. SQL Server udostępnia dedykowane połączenie administratora (DAC). DAC pozwala administratorowi na dostęp do uruchomionego serwera w celu wykonywania funkcji diagnostycznych lub instrukcji języka Transact-SQL lub rozwiązywania problemów na serwerze i sprawia, że jest to atrakcyjny obiekt docelowy, gdy zostanie on włączony zdalnie.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL         |
|VA1051     |AUTO_CLOSE powinna być wyłączona we wszystkich bazach danych          |Średniaa         |Opcja AUTO_CLOSE określa, czy baza danych ma być bezpiecznie zamykana i zwalnia zasoby po zakończeniu ostatniego połączenia przez użytkownika. Bez względu na to, że może to spowodować odmowę usługi przez agresywne otwieranie i zamykanie bazy danych, należy pamiętać, że ta funkcja jest wyłączona. Ta reguła sprawdza, czy ta opcja jest wyłączona w bieżącej bazie danych.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1066     |Nie można usunąć nieużywanych punktów końcowych brokera usług          |Niski         |Service Broker zapewnia kolejkowanie i niezawodną obsługę komunikatów dla SQL Server. Service Broker jest używana zarówno w przypadku aplikacji korzystających z pojedynczego wystąpienia SQL Server, jak i aplikacji, które dystrybuują prace w wielu wystąpieniach. Service Broker punkty końcowe zapewniają opcje zabezpieczeń transportu i przesyłania dalej komunikatów. Ta zasada wylicza wszystkie punkty końcowe brokera usług. Usuń te, które nie są używane.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1071     |Opcja "Skanuj w poszukiwaniu procedur składowanych uruchamiania" powinna być wyłączona          |Średniaa         |Gdy jest włączone ustawienie "Skanuj pod kątem uruchamiania", SQL Server skanuje i uruchamia wszystkie automatycznie uruchamiane procedury składowane zdefiniowane na serwerze. Jeśli ta opcja jest włączona, SQL Server skanuje i uruchamia wszystkie automatycznie uruchamiane procedury składowane zdefiniowane na serwerze. Ta reguła sprawdza, czy ta opcja jest wyłączona.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1092     |Wystąpienie SQL Server nie powinno być anonsowane przez usługę SQL Server Browser          |Niski         |SQL Server używa usługi SQL Server Browser do wyliczania wystąpień aparatu bazy danych zainstalowanej na komputerze. Dzięki temu aplikacje klienckie mogą przeglądać w poszukiwaniu serwera i pomagają klientom rozróżnić wiele wystąpień aparatu bazy danych na tym samym komputerze. Ta reguła sprawdza, czy wystąpienie programu SQL jest ukryte.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1102     |Wiarygodny bit powinien być wyłączony we wszystkich bazach danych z wyjątkiem MSDB          |Wysoki         |Właściwość GODNa zaufania bazy danych służy do wskazywania, czy wystąpienie SQL Server ufa bazie danych i jej zawartości. Jeśli ta opcja jest włączona, moduły bazy danych (na przykład funkcje zdefiniowane przez użytkownika lub procedury składowane), które używają kontekstu personifikacji, mogą uzyskiwać dostęp do zasobów poza bazą danych. Ta reguła sprawdza, czy WIARYGODNy bit jest wyłączony we wszystkich bazach danych z wyjątkiem MSDB.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL         |
|VA1143     |Użytkownik "dbo" nie powinien być używany do normalnej operacji usługi          |Średniaa         |Obiekt dbo lub właściciel bazy danych jest kontem użytkownika, które ma implikowane uprawnienia do wykonywania wszystkich działań w bazie danych. Członkowie stałej roli serwera sysadmin są automatycznie zamapowane na dbo. Ta reguła sprawdza, czy dbo nie jest jedynym kontem możliwym do uzyskania dostępu do tej bazy danych. Należy pamiętać, że na nowo utworzonej czystej bazie danych ta reguła zakończy się niepowodzeniem, dopóki nie zostaną utworzone dodatkowe role.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA1144     |Baza danych modelu powinna być dostępna tylko dla "dbo"          |Średniaa         |Baza danych modelu jest używana jako szablon dla wszystkich baz danych utworzonych w wystąpieniu SQL Server. Zmiany wprowadzone do bazy danych modelu, takie jak model odzyskiwania rozmiaru bazy danych i inne opcje bazy danych, są stosowane do wszystkich baz danych utworzonych później. Ta reguła sprawdza, czy dbo jest jedynym kontem, które może uzyskać dostęp do bazy danych modelu.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL         |
|VA1230     |Element FileStream powinien być wyłączony          |Wysoki         |Funkcja FILESTREAM integruje aparat bazy danych SQL Server z systemem plików NTFS, przechowując dane binarne dużego obiektu (BLOB) typu varbinary (max) jako pliki w systemie plików. Instrukcje języka Transact-SQL umożliwiają wstawianie, aktualizowanie, wykonywanie zapytań, wyszukiwanie i wykonywanie kopii zapasowych danych FILESTREAM. Włączenie funkcji FILESTREAM w programie SQL Server uwidacznia dodatkowy interfejs API przesyłania strumieniowego systemu plików NTFS, który zwiększa podatność na ataki i sprawia, że złośliwe ataki. Ta reguła sprawdza, czy element FILESTREAM jest wyłączony.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1235     |Konfiguracja serwera "replikacja XPs" powinna być wyłączona          |Średniaa         |Wyłącz przestarzałą konfigurację serwera "replikacja XPs", aby ograniczyć obszar narażony na ataki. Jest to tylko wewnętrzne ustawienie konfiguracji.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL         |
|VA1244     |Użytkownicy oddzieleni powinni zostać usunięci z baz danych programu SQL Server          |Średniaa         |Użytkownik bazy danych, który istnieje w bazie danych, ale nie ma odpowiadającego mu identyfikatora logowania w bazie danych Master lub jako zasób zewnętrzny (na przykład użytkownik systemu Windows) jest określany jako użytkownik oddzielony i powinien zostać usunięty lub ponownie zmapowany do prawidłowej nazwy logowania. Ta reguła sprawdza, czy nie istnieją oddzielone użytkownicy.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL         |
|VA1245     |Informacje o dbo powinny być spójne między docelową bazą danych a wzorcem          |Wysoki         |Są nadmiarowe informacje o tożsamości dbo dla dowolnej bazy danych: metadane przechowywane w samej bazie danych i metadane przechowywane w głównej bazie danych. Ta reguła sprawdza, czy te informacje są spójne między docelową bazą danych a serwerem głównym.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL         |
|VA1247     |Nie powinny istnieć żadne wystąpienia SPs oznaczone jako Autostart          |Wysoki         |W przypadku skonfigurowania usługi SQL Server do "skanowania w celu uruchomienia systemu" serwer przeskanuje bazę danych Master pod kątem procedur składowanych oznaczonych jako automatyczne uruchamianie. Ta reguła sprawdza, czy nie ma żadnych aplikacji SPs oznaczonych jako Autostart.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1256     |Zestawy CLR użytkownika nie powinny być zdefiniowane w bazie danych          |Wysoki         |Zestawy CLR mogą służyć do wykonywania dowolnego kodu w procesie SQL Server. Ta reguła sprawdza, czy w bazie danych nie ma zdefiniowanych przez użytkownika zestawów CLR.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL         |
|VA1277     |Należy włączyć szyfrowanie sieci podstawowej          |Wysoki         |Baza danych jest technologią, która uzyskuje dostęp i łączy zarówno dane nierelacyjne, jak i relacyjne, z poziomu SQL Server. Opcja szyfrowania sieci podstawowej umożliwia skonfigurowanie SQL Server do szyfrowania formantów i kanałów danych podczas korzystania z bazy. Ta reguła sprawdza, czy ta opcja jest włączona.         |<nobr>SQL Server 2016 +<nobr/>         |
|VA1278     |Utwórz linię bazową zewnętrznych dostawców zarządzania kluczami          |Średniaa         |Rozszerzalne zarządzanie kluczami SQL Server (EKM) umożliwia dostawcom modułów zabezpieczeń EKM/sprzętu innych firm zarejestrowanie ich modułów w programie SQL Server. Po zarejestrowaniu SQL Server użytkownicy mogą używać kluczy szyfrowania przechowywanych w modułach EKM, ta reguła wyświetla listę dostawców EKM używanych w systemie.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL         |
|VA2062     |Reguły zapory na poziomie bazy danych nie powinny przyznawać nadmiernego dostępu          |Wysoki         |Zapora na poziomie Azure SQL Database pomaga chronić dane, zapobiegając wszystkim dostępowi do bazy danych do momentu określenia, które adresy IP mają uprawnienia. Reguły zapory na poziomie bazy danych umożliwiają dostęp do konkretnej bazy danych na podstawie źródłowego adresu IP każdego żądania. Reguły zapory na poziomie bazy danych dla baz danych Master i User można tworzyć i zarządzać nimi wyłącznie za pośrednictwem języka Transact-SQL (w przeciwieństwie do reguł zapory na poziomie serwera, które można także tworzyć i zarządzać przy użyciu Azure Portal lub programu PowerShell). Aby uzyskać więcej informacji, zobacz [Azure SQL Database i reguły zapory adresów IP usługi Azure Synapse Analytics](https://docs.microsoft.com/azure/sql-database/sql-database-firewall-configure). Ten test sprawdza, czy reguły zapory na poziomie bazy danych nie zapewniają dostępu więcej niż 255 adresów IP.         |<nobr/>SQL Database<br/><br/>Azure Synapse         |
|VA2063     |Reguły zapory na poziomie serwera nie powinny przyznawać nadmiernego dostępu          |Wysoki         |Zapora na poziomie programu Azure SQL Server pomaga chronić serwer, zapobiegając wszystkim dostępowi do baz danych do momentu określenia, które adresy IP mają uprawnienia. Reguły zapory na poziomie serwera zapewniają dostęp do wszystkich baz danych, które należą do serwera na podstawie źródłowego adresu IP każdego żądania.  Reguły zapory na poziomie serwera można tworzyć i zarządzać nimi tylko za pomocą języka Transact-SQL, a także za pomocą Azure Portal lub programu PowerShell. Aby uzyskać więcej informacji, zobacz [Azure SQL Database i reguły zapory adresów IP usługi Azure Synapse Analytics](https://docs.microsoft.com/azure/sql-database/sql-database-firewall-configure). Ten test sprawdza, czy reguły zapory na poziomie serwera nie zapewniają dostępu więcej niż 255 adresów IP.         |<nobr/>SQL Database<br/><br/>Azure Synapse         |
|VA2064     |Reguły zapory na poziomie bazy danych powinny być śledzone i utrzymywane z minimalnym minimum          |Wysoki         |Zapora na poziomie Azure SQL Database pomaga chronić dane, zapobiegając wszystkim dostępowi do bazy danych do momentu określenia, które adresy IP mają uprawnienia. Reguły zapory na poziomie bazy danych umożliwiają dostęp do konkretnej bazy danych na podstawie źródłowego adresu IP każdego żądania. Reguły zapory na poziomie bazy danych dla baz danych Master i User można tworzyć i zarządzać nimi wyłącznie za pośrednictwem języka Transact-SQL (w przeciwieństwie do reguł zapory na poziomie serwera, które można także tworzyć i zarządzać przy użyciu Azure Portal lub programu PowerShell). Aby uzyskać więcej informacji, zobacz [Azure SQL Database i reguły zapory adresów IP usługi Azure Synapse Analytics](https://docs.microsoft.com/azure/sql-database/sql-database-firewall-configure). To sprawdzenie wylicza wszystkie reguły zapory na poziomie bazy danych, aby można było zidentyfikować i rozwiązać wszelkie wprowadzone do nich zmiany.         |<nobr/>SQL Database<br/><br/>Azure Synapse         |
|VA2065     |Reguły zapory na poziomie serwera powinny być śledzone i utrzymywane z minimalnym minimum          |Wysoki         |Zapora na poziomie programu Azure SQL Server pomaga chronić dane, zapobiegając wszystkim dostępowi do baz danych do momentu określenia, które adresy IP mają uprawnienia. Reguły zapory na poziomie serwera zapewniają dostęp do wszystkich baz danych, które należą do serwera na podstawie źródłowego adresu IP każdego żądania.  Reguły zapory na poziomie serwera można tworzyć i zarządzać nimi za pomocą języka Transact-SQL, a także za pomocą Azure Portal lub programu PowerShell. Aby uzyskać więcej informacji, zobacz [Azure SQL Database i reguły zapory adresów IP usługi Azure Synapse Analytics](https://docs.microsoft.com/azure/sql-database/sql-database-firewall-configure).  To sprawdzenie wylicza wszystkie reguły zapory na poziomie serwera, aby można było zidentyfikować i rozwiązać wszelkie wprowadzone do nich zmiany.         |<nobr/>SQL Database<br/><br/>Azure Synapse         |
|VA2111     |Przykładowe bazy danych powinny zostać usunięte          |Niski         |Microsoft SQL Server dostarczana z kilkoma przykładowymi bazami danych. Ta reguła sprawdza, czy Przykładowa baza danych została usunięta.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL         |
|VA2120     |Funkcje, które mogą mieć wpływ na zabezpieczenia, powinny być wyłączone          |Wysoki         |SQL Server jest w stanie zapewnić szeroką gamę funkcji i usług. Niektóre funkcje i usługi udostępniane domyślnie mogą nie być konieczne i umożliwiają im niekorzystnie wpływ na bezpieczeństwo systemu. Ta reguła sprawdza, czy te funkcje są wyłączone.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL         |
|VA2121     | Funkcja "procedury automatyzacji OLE" powinna być wyłączona         |Wysoki         |SQL Server jest w stanie zapewnić szeroką gamę funkcji i usług. Niektóre funkcje i usługi udostępniane domyślnie mogą nie być konieczne, a włączenie ich może niekorzystnie wpłynąć na bezpieczeństwo systemu. Opcja procedury automatyzacji OLE określa, czy obiekty automatyzacji OLE mogą być tworzone w ramach partii Transact-SQL. Są to rozszerzone procedury składowane, które umożliwiają SQL Server użytkownikom wykonywanie funkcji zewnętrznych dla SQL Server. Bez względu na to, jakie korzyści mogą być również używane w przypadku programów wykorzystujących luki w zabezpieczeniach i są znane jako popularne mechanizmy zakładania plików na komputerach docelowych. Zaleca się używanie programu PowerShell jako zamiennika dla tego narzędzia. Ta reguła sprawdza, czy funkcja "procedury automatyzacji OLE" jest wyłączona.          |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL         |
|VA2122     |Funkcja "Opcje użytkownika" powinna być wyłączona          |Średniaa         |SQL Server jest w stanie zapewnić szeroką gamę funkcji i usług. Niektóre funkcje i usługi udostępniane domyślnie mogą nie być konieczne i umożliwiają im niekorzystnie wpływ na bezpieczeństwo systemu. Opcje użytkownika określają globalne wartości domyślne dla wszystkich użytkowników. Lista domyślnych opcji przetwarzania zapytań jest określana na czas trwania sesji pracy użytkownika. Opcje użytkownika umożliwiają zmianę wartości domyślnych opcji zestawu (Jeśli ustawienia domyślne serwera nie są odpowiednie). Ta reguła sprawdza, czy funkcja "Opcje użytkownika" jest wyłączona.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Wystąpienie zarządzane SQL         |
|VA2126     |Rozszerzalność — funkcje, które mogą mieć wpływ na zabezpieczenia, powinny być wyłączone, jeśli nie są używane          |Średniaa         |SQL Server oferuje szeroką gamę funkcji i usług. Niektóre funkcje i usługi udostępniane domyślnie mogą nie być konieczne, a włączenie ich może niekorzystnie wpłynąć na bezpieczeństwo systemu. Ta reguła sprawdza, czy konfiguracje zezwalające na wyodrębnianie danych do zewnętrznego źródła danych i wykonywanie skryptów z pewnymi rozszerzeniami języka zdalnego zostały wyłączone.         |<nobr>SQL Server 2016 +<nobr/>         |

## <a name="removed-rules"></a>Usunięte reguły

|Identyfikator zasady  |Tytuł reguły  |
|---------|---------|
|VA1021     |Globalne tymczasowe procedury składowane powinny zostać usunięte         |
|VA1024    |Należy włączyć tryb inspekcji C2 |
|VA1069     |Uprawnienia do wyboru z tabel systemowych i widoków powinny zostać odwołane z innych niż sysadmin         |
|VA1090    |Upewnij się, że wszystkie instytucje rządowe (GOTS) i niestandardowe procedury składowane są szyfrowane |
|VA1103    |Używaj tylko środowiska CLR z uprawnieniem SAFE_ACCESS |
|VA1229     |Ustawienie FILESTREAM w rejestrze i w konfiguracji SQL Server powinno być zgodne         |
|VA1231     |Element FileStream powinien być wyłączony (SQL)         |
|VA1234     |Należy włączyć ustawienie kryteriów wspólnych         |
|VA1252     |Lista zdarzeń, które są poddawane inspekcji i zarządzane centralnie za pomocą specyfikacji inspekcji serwera.         |
|VA1253     |Lista zdarzeń podlegających inspekcji w zakresie bazy danych i centralnie zarządzanych przez specyfikacje inspekcji serwera         |
|VA1263     |Wyświetl listę wszystkich aktywnych inspekcji w systemie         |
|VA1266     |Opcja "MUST_CHANGE" powinna być ustawiona dla wszystkich nazw logowania SQL         |
|VA1276     |Funkcja agenta XPs powinna być wyłączona         |
|VA1286     |Nie należy przyznawać uprawnień do bazy danych bezpośrednio podmiotom (obiekt lub kolumna)         |
|VA2000     |Minimalny zestaw podmiotów zabezpieczeń powinien mieć wpływ na uprawnienia ograniczone do bazy danych         |
|VA2001     |Minimalny zestaw podmiotów zabezpieczeń powinien mieć wpływ na uprawnienia ograniczone do bazy danych w obiektach lub kolumnach         |
|VA2002     |Minimalny zestaw podmiotów zabezpieczeń powinien mieć duży wpływ na ograniczone uprawnienia bazy danych do różnych zabezpieczanych         |
|VA2010     |Minimalny zestaw podmiotów zabezpieczeń powinien mieć przyznane średni wpływ na uprawnienia w zakresie bazy danych         |
|VA2021     |Minimalny zestaw podmiotów zabezpieczeń powinien mieć przyznane uprawnienia do zmiany zakresu bazy danych na obiekty lub kolumny.         |
|VA2022     |Minimalny zestaw podmiotów zabezpieczeń powinien mieć przyznane uprawnienia do zmiany zakresu bazy danych na różnych zabezpieczanych         |
|VA2030     |Minimalny zestaw podmiotów zabezpieczeń powinien mieć przyznane uprawnienia SELECT lub EXECUTE z zakresem bazy danych         |
|VA2031     |Minimalny zestaw podmiotów zabezpieczeń powinien mieć przyznane wybór z zakresu bazy danych          |
|VA2032     |Minimalny zestaw podmiotów zabezpieczeń powinien mieć przyznane uprawnienia SELECT lub EXECUTE z zakresem bazy danych w schemacie         |
|VA2034     |Minimalny zestaw podmiotów zabezpieczeń powinien mieć przyznane uprawnienie EXECUTE z zakresem bazy danych w kolekcji schematów XML         |
|VA2040     |Minimalny zestaw podmiotów zabezpieczeń powinien mieć wpływ na uprawnienia ograniczone do bazy danych         |
|VA2041     |Minimalny zestaw podmiotów zabezpieczeń powinien mieć wpływ na uprawnienia ograniczone do bazy danych w obiektach lub kolumnach         |
|VA2042     |Minimalny zestaw podmiotów zabezpieczeń powinien mieć wpływ na uprawnienia ograniczone do bazy danych w schemacie         |
|VA2050     |Minimalny zestaw podmiotów zabezpieczeń powinien mieć przyznane uprawnienia definicji widoku z zakresem bazy danych         |
|VA2051     |Minimalny zestaw podmiotów zabezpieczeń powinien mieć przyznane uprawnienia definicji widoku z zakresem bazy danych dla obiektów lub kolumn         |
|VA2052     |Minimalny zestaw podmiotów zabezpieczeń powinien mieć uprawnienia do definicji widoku w zakresie bazy danych na różnych zabezpieczanych         |
|VA2100     |Minimalny zestaw podmiotów zabezpieczeń powinien mieć ograniczone wpływ na uprawnienia do zakresu serwera         |
|VA2101     |Minimalny zestaw podmiotów zabezpieczeń powinien mieć przyznane średni wpływ na uprawnienia do zakresu serwera         |
|VA2102     |Minimalny zestaw podmiotów zabezpieczeń powinien mieć przyznane niskie wpływ na uprawnienia do zakresu serwera         |
|VA2104     |Uprawnienia wykonywania w rozszerzonych procedurach składowanych powinny zostać odwołane z poziomu publicznego         |
|VA2105     |Hasło logowania nie powinno być łatwo odgadnąć         |
|VA2112     |Uprawnienia publiczne dla usług transformacji danych (DTS) powinny zostać odwołane         |
|VA2115     |Minimalny zestaw podmiotów zabezpieczeń powinien być elementami członkowskimi średniego wpływu na stałe role serwera         |
|VA2123     |Funkcja dostępu zdalnego powinna być wyłączona         |
|VA2127     |Funkcja "skrypty zewnętrzne" powinna być wyłączona         |

## <a name="next-steps"></a>Następne kroki

- [Ocena luk w zabezpieczeniach](sql-vulnerability-assessment.md)
- [Dziennik zmian reguł oceny luk w zabezpieczeniach SQL](sql-database-vulnerability-assessment-rules-changelog.md)