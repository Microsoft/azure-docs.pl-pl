---
author: memildin
ms.service: security-center
ms.topic: include
ms.date: 03/14/2021
ms.author: memildin
ms.custom: generated
ms.openlocfilehash: 4a03a36f098035db1a91b4516dedb6a303aa41d2
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/20/2021
ms.locfileid: "103466210"
---
W tej kategorii znajdują się **24** zalecenia.

|Zalecenie |Opis |Ważność |
|---|---|---|
|Usługa Azure Defender dla rejestrów kontenerów powinna być włączona |Aby tworzyć bezpieczne obciążenia kontenerów, upewnij się, że obrazy, na których się opierają, są bezpłatne.<br>Usługa Azure Defender dla rejestrów kontenerów skanuje rejestr pod kątem luk w zabezpieczeniach na każdym wypchnięciu obrazu kontenera i udostępnia szczegółowe wyniki dla każdego obrazu.<br>Aby ulepszyć stan zabezpieczeń kontenerów i chronić je przed atakami, Włącz usługę Azure Defender dla rejestrów kontenerów.<br><br>Ważne: korygowaniem to zalecenie spowoduje naliczenie opłat za ochronę rejestrów kontenerów. Jeśli nie masz żadnych rejestrów kontenerów w ramach tej subskrypcji, nie zostaną naliczone żadne opłaty.<br>Jeśli w przyszłości utworzysz dowolne rejestry kontenerów dla tej subskrypcji, zostaną one automatycznie chronione, a opłaty będą naliczane w tym czasie.<br> <a href='https://docs.microsoft.com/azure/security-center/azure-container-registry-integration'>Dowiedz się więcej o usłudze Azure Defender dla rejestrów kontenerów.</a><br />(Powiązane zasady: [usługa Azure Defender dla rejestrów kontenerów powinna być włączona](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fmicrosoft.authorization%2fpolicyDefinitions%2fc25d9a16-bc35-4e15-a7e5-9db606bf9ed4)) |Wys. |
|Usługa Azure Defender for Kubernetes powinna być włączona |Usługa Azure Defender for Kubernetes zapewnia ochronę przed zagrożeniami w czasie rzeczywistym w środowiskach kontenerów i generuje alerty dla podejrzanych działań.<br>Te informacje pozwalają na szybkie rozwiązywanie problemów dotyczących zabezpieczeń i poprawę bezpieczeństwa kontenerów.<br><br>Ważne: korygowaniem to zalecenie spowoduje naliczenie opłat za ochronę klastrów Kubernetes. Jeśli nie masz żadnych klastrów Kubernetes w tej subskrypcji, nie zostaną naliczone żadne opłaty.<br>Jeśli w przyszłości utworzysz klastry Kubernetes w ramach tej subskrypcji, zostaną one automatycznie chronione, a opłaty będą naliczane w tym czasie.<br> <a href='https://docs.microsoft.com/azure/security-center/azure-kubernetes-service-integration'>Dowiedz się więcej o usłudze Azure Defender for Kubernetes.</a><br />(Powiązane zasady: [usługa Azure Defender for Kubernetes powinna być włączona](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fmicrosoft.authorization%2fpolicyDefinitions%2f523b5cd1-3e23-492f-a539-13118b6d1e3a)) |Wys. |
|Dodatek Azure Policy dla Kubernetes powinien być zainstalowany i włączony w klastrach |Dodatek Azure Policy dla Kubernetes rozszerza <a target="_blank" href="https://github.com/open-policy-agent/gatekeeper">strażnik</a> v3, element webhook kontrolera usługi Admission Control dla programu <a target="_blank" href="https://www.openpolicyagent.org/">Open Policy Agent</a> (nieprzez), aby stosować zasady wymuszania i zabezpieczenia w klastrach w scentralizowany, spójny sposób.<p>Security Center wymaga dodatku do inspekcji i wymuszania możliwości zabezpieczeń i zgodności wewnątrz klastrów. <a target="_blank" href="https://docs.microsoft.com/azure/governance/policy/concepts/policy-for-kubernetes"> Dowiedz się więcej</a>.</p><p>Wymaga Kubernetes v 1.14.0 lub nowszego.</p><br />(Powiązane zasady: [dodatek Azure Policy dla usługi Kubernetes Service (AKS) powinien być zainstalowany i włączony w klastrach](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f0a15ec92-a229-4763-bb14-0ea34a568f8d)) |Wys. |
|Należy wymusić limity procesora CPU i pamięci kontenera |Wymuszanie ograniczeń dotyczących procesora CPU i pamięci uniemożliwia ataki wyczerpania zasobów (w wyniku ataku typu "odmowa usługi").<p>Zalecamy ustawienie limitów dla kontenerów, aby zapewnić, że środowisko uruchomieniowe uniemożliwia kontenerowi użycie więcej niż skonfigurowanego limitu zasobów.</p><br />(Powiązane zasady: [upewnij się, że limity zasobów procesora i pamięci kontenera nie przekraczają określonych limitów w klastrze Kubernetes](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2fe345eecc-fa47-480f-9e88-67dcc122b164)) |Śred. |
|Obrazy kontenerów powinny być wdrażane tylko z zaufanych rejestrów |Obrazy działające w klastrze Kubernetes powinny pochodzić ze znanych i monitorowanych rejestrów obrazów kontenerów. Zaufane rejestry zmniejszają ryzyko narażenia klastra poprzez ograniczenie potencjału do wprowadzenia nieznanych luk w zabezpieczeniach i złośliwych obrazów.<br />(Powiązane zasady: [upewnij się, że tylko dozwolone obrazy kontenerów w klastrze Kubernetes](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2ffebd0533-8e55-448f-b837-bd0e06f16469)) |Wys. |
|Rejestry kontenerów powinny być szyfrowane za pomocą klucza zarządzanego przez klienta (CMK) |Klucze zarządzane przez klienta służą do zarządzania szyfrowaniem w pozostałej części zawartości rejestrów. Domyślnie dane są szyfrowane przy użyciu kluczy zarządzanych przez usługę, ale klucze zarządzane przez klienta (CMK) są często wymagane do spełnienia standardów zgodności z przepisami. CMKs umożliwiają szyfrowanie danych przy użyciu klucza Azure Key Vault utworzonego i należącego do użytkownika. Użytkownik ma pełną kontrolę i odpowiedzialność za kluczowy cykl życia, włącznie z rotacją i zarządzaniem. Dowiedz się więcej o szyfrowaniu CMK w https://aka.ms/acr/CMK .<br />(Powiązane zasady: [rejestry kontenerów powinny być szyfrowane za pomocą klucza zarządzanego przez klienta (CMK)](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f5b9159ae-1701-4a6f-9a7a-aa9c8ddd0580)) |Śred. |
|Rejestry kontenerów nie powinny zezwalać na nieograniczony dostęp do sieci |Rejestry kontenerów platformy Azure domyślnie akceptują połączenia przez Internet z hostów w dowolnej sieci. Aby chronić rejestry przed potencjalnymi zagrożeniami, Zezwól na dostęp tylko z określonych publicznych adresów IP lub zakresów adresów. Jeśli rejestr nie ma reguły IP/zapory lub skonfigurowano sieci wirtualnej, będzie ona wyświetlana w zasobach w złej kondycji. Dowiedz się więcej o regułach sieci Container Registry tutaj: https://aka.ms/acr/portal/public-network i tutaj https://aka.ms/acr/vnet .<br />(Powiązane zasady: [rejestry kontenerów nie powinny zezwalać na nieograniczony dostęp do sieci](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2fd0793b48-0edc-4296-a390-4c75d1bdfd71)) |Śred. |
|Rejestry kontenerów powinny używać prywatnego linku |Link prywatny platformy Azure umożliwia łączenie sieci wirtualnej z usługami platformy Azure bez publicznego adresu IP w źródle lub miejscu docelowym. Platforma linków prywatnych obsługuje łączność między klientem i usługami za pośrednictwem sieci szkieletowej platformy Azure. Mapowanie prywatnych punktów końcowych do rejestrów kontenerów zamiast całej usługi spowoduje również ochronę przed ryzykiem wycieku danych. Dowiedz się więcej o: https://aka.ms/acr/private-link .<br />(Powiązane zasady: [rejestry kontenerów powinny używać prywatnego linku](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2fe8eef0a8-67cf-4eb4-9386-14b0e78733d4)) |Śred. |
|Należy unikać kontenera z eskalacją uprawnień |Kontenery nie powinny działać z eskalacją uprawnień do katalogu głównego w klastrze Kubernetes.<br>Atrybut AllowPrivilegeEscalation określa, czy proces może uzyskać więcej uprawnień niż jego proces nadrzędny.<br />(Powiązane zasady: [klastry Kubernetes nie powinny zezwalać na eskalację uprawnień kontenera](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f1c6e92c9-99f0-4e55-9cf2-0c234dc48f99)) |Śred. |
|Należy unikać obsługi kontenerów chronionych przestrzeni nazw hosta |Aby chronić przed eskalacją uprawnień poza kontenerem, należy unikać dostępu do wrażliwych przestrzeni nazw hosta (identyfikator procesu hosta i hosta IPC) w klastrze Kubernetes.<br />(Powiązane zasady: [kontenery klastrów Kubernetes nie powinny udostępniać identyfikatora procesu hosta ani przestrzeni nazw IPC hosta](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f47a1ee2f-2a2a-4576-bf2a-e0e36709c2b8)) |Śred. |
|Kontenery powinny nasłuchiwać tylko na dozwolonych portach |Aby zmniejszyć obszar ataków klastra Kubernetes, Ogranicz dostęp do klastra przez ograniczenie kontenera dostęp do skonfigurowanych portów.<br />(Powiązane zasady: [upewnij się, że kontenery nasłuchują tylko na dozwolonych portach w klastrze Kubernetes](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f440b515e-a580-421e-abeb-b159a61ddcbc)) |Śred. |
|Niezmienny (tylko do odczytu) główny system plików powinien zostać wymuszony dla kontenerów |Kontenery powinny działać z głównym systemem plików tylko do odczytu w klastrze Kubernetes. Niezmienny system plików chroni kontenery przed zmianami w czasie wykonywania przy użyciu złośliwych plików binarnych dodawanych do ścieżki.<br />(Powiązane zasady: [kontenery klastrów Kubernetes powinny działać z głównym systemem plików tylko do odczytu](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2fdf49d893-a74c-421d-bc95-c663042e5b80)) |Śred. |
|Klastry Kubernetes powinny być dostępne tylko za pośrednictwem protokołu HTTPS |Użycie protokołu HTTPS zapewnia uwierzytelnianie i chroni dane przesyłane przed atakami polegającymi na podsłuchu w warstwie sieciowej. Ta funkcja jest obecnie ogólnie dostępna w przypadku usługi Kubernetes Service (AKS) i w wersji zapoznawczej aparatu AKS i usługi Azure ARC z włączoną obsługą Kubernetes. Aby uzyskać więcej informacji, odwiedź stronę https://aka.ms/kubepolicydoc<br />(Powiązane zasady: [Wymuszaj ruch przychodzący protokołu HTTPS w klastrze Kubernetes](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f1a5b4dca-0b6f-4cf5-907c-56316bc1bf3d)) |Wys. |
|Serwer interfejsu API zarządzania usługami Kubernetes Services powinien być skonfigurowany z ograniczonym dostępem |Aby zapewnić, że tylko aplikacje z dozwolonych sieci, maszyn lub podsieci mogą uzyskiwać dostęp do klastra, Ogranicz dostęp do serwera Kubernetes interfejs API zarządzania usługami. Można ograniczyć dostęp przez zdefiniowanie autoryzowanych zakresów adresów IP lub przez skonfigurowanie serwerów interfejsu API jako klastrów prywatnych, zgodnie z opisem w temacie <a target='_blank' href=https://docs.microsoft.com/azure/aks/private-clusters>https://docs.microsoft.com/azure/aks/private-clusters</a> .<br />(Powiązane zasady: [zakresy dozwolonych adresów IP powinny być zdefiniowane w usługach Kubernetes Services](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f0e246bcf-5f6f-4f87-bc6f-775d4712c7ea)) |Wys. |
|Usługi Kubernetes należy uaktualnić do niezagrożonej wersji Kubernetes |Uaktualnij klaster usługi Kubernetes do nowszej wersji Kubernetes, aby chronić przed znanymi lukami w zabezpieczeniach w bieżącej wersji Kubernetes. Luka w zabezpieczeniach <a target='_blank' href='https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2019-9946'>CVE-2019-9946</a> została poprawiona w wersjach Kubernetes 1.11.9 +, 1.12.7 +, 1.13.5 + i 1.14.0 +<br />(Powiązane zasady: [usługi Kubernetes należy uaktualnić do niepodatnej na wersje Kubernetes](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2ffb893a29-21bb-418c-a157-e99480ec364c)) |Wys. |
|W przypadku kontenerów powinny być wymuszane najmniej uprzywilejowane funkcje systemu Linux. |Aby zmniejszyć obszar ataków na ataki, Ogranicz możliwości systemu Linux i Udziel określonych uprawnień do kontenerów bez udzielania wszystkich uprawnień użytkownika root. Zalecamy porzucenie wszystkich funkcji, a następnie dodanie tych, które są wymagane<br />(Powiązane zasady: [kontenery klastra Kubernetes powinny używać tylko dozwolonych możliwości](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2fc26596ff-4d70-4e6a-9a30-c2506bd2f80c)) |Śred. |
|Zastępowanie lub wyłączanie profilowania AppArmor profil powinien być ograniczony |Kontenery uruchomione w klastrze Kubernetes powinny być ograniczone tylko do dozwolonych profilów AppArmor.<br>; AppArmor (ochrona aplikacji) to moduł zabezpieczeń systemu Linux, który chroni system operacyjny i jego aplikacje przed zagrożeniami bezpieczeństwa. Aby można było z niego korzystać, administrator systemu kojarzy profil zabezpieczeń AppArmor z każdym programem.<br />(Powiązane zasady: [kontenery klastra Kubernetes powinny używać tylko dozwolonych profilów AppArmor](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f511f5417-5d12-434d-ab2e-816901e72a5e)) |Wys. |
|Należy unikać używania kontenerów uprzywilejowanych |Aby uniemożliwić nieograniczony dostęp do hosta, jeśli to możliwe, unikaj kontenerów uprzywilejowanych.<p>Kontenery uprzywilejowane mają wszystkie główne możliwości maszyny hosta. Mogą one być używane jako punkty wejścia do ataków oraz do rozpowszechniania złośliwego kodu lub złośliwego oprogramowania w celu naruszenia zabezpieczeń aplikacji, hostów i sieci.</p><br />(Powiązane zasady: nie [Zezwalaj na kontenery uprzywilejowane w klastrze Kubernetes](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f95edb821-ddaf-4404-9732-666045e056b4)) |Śred. |
|Access Control Role-Based należy używać w usługach Kubernetes Services |Aby zapewnić szczegółowe filtrowanie działań, które użytkownicy mogą wykonywać, użyj Role-Based Access Control (RBAC) do zarządzania uprawnieniami w klastrach usługi Kubernetes i konfigurowania odpowiednich zasad autoryzacji. Aby uzyskać więcej informacji, zobacz <a target='_blank' href='https://docs.microsoft.com/azure/aks/concepts-identity#role-based-access-controls-rbac'>Kontrola dostępu oparta na rolach na platformie Azure</a>.<br />(Powiązane zasady: [Access Control oparte na rolach (RBAC) powinny być używane w usługach Kubernetes Services](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2fac4a19c2-fa67-49b4-8ae5-0b2e78c49457)) |Wys. |
|Należy unikać uruchamiania kontenerów jako użytkownik główny |Kontenery powinny być uruchamiane jako użytkownicy niebędący użytkownikami głównym w klastrze Kubernetes. Uruchamianie procesu jako użytkownik główny wewnątrz kontenera uruchamia go jako element główny na hoście. W przypadku naruszenia zabezpieczeń osoba atakująca ma dostęp do katalogu głównego w kontenerze, a wszelkie nieskonfigurowane konfiguracje stają się łatwiejsze do wykorzystania.<br />(Powiązane zasady: [Kubernetes klastrów i kontenery powinny działać tylko z zatwierdzonymi identyfikatorami użytkowników i grup](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2ff06ddb64-5fa3-4b77-b166-acb36f7f6042)) |Wys. |
|Usługi powinny nasłuchiwać tylko na dozwolonych portach |Aby zmniejszyć obszar ataków klastra Kubernetes, Ogranicz dostęp do klastra przez ograniczenie dostępu usług do skonfigurowanych portów.<br />(Powiązane zasady: [upewnij się, że usługi nasłuchują tylko na dozwolonych portach w klastrze Kubernetes](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f233a2a17-77ca-4fb1-9b6b-69223d272a44)) |Śred. |
|Użycie sieci i portów hosta powinno być ograniczone |Ogranicz dostęp do sieci hosta i dozwolony zakres portów hosta w klastrze Kubernetes. Utworzenie wystąpienia z włączonym atrybutem hostNetwork spowoduje udostępnienie przestrzeni sieciowej węzła. Aby uniknąć złamania zabezpieczeń kontenera przed wykrywaniem ruchu sieciowego, nie zalecamy umieszczania w sieci hostów Twojego zasobników. Jeśli trzeba uwidocznić port kontenera w sieci węzła, a użycie portu węzła usługi Kubernetes nie spełnia Twoich potrzeb, kolejną możliwością jest określenie hostPort dla kontenera w specyfikacji pod.<br />(Powiązane zasady: [Kubernetes klastrów należy używać tylko zatwierdzonej sieci hosta i zakresu portów](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f82985f06-dc18-4a48-bc1c-b9f4f0098cfe)) |Śred. |
|Użycie instalacji woluminów HostPath na początku musi być ograniczone do znanej listy, aby ograniczyć dostęp do węzła ze złamanych kontenerów |Zalecamy ograniczenie instalacji woluminów HostPath w klastrze Kubernetes do skonfigurowanych dozwolonych ścieżek hosta. W przypadku naruszenia zabezpieczeń węzeł kontenera dostęp z kontenerów powinien być ograniczony<br />(Powiązane zasady: [klaster Kubernetes na woluminach hostPath powinien używać tylko dozwolonych ścieżek hosta](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f098fc59e-46c7-4d99-9b16-64990e543d75)) |Śred. |
|Luki w zabezpieczeniach Azure Container Registry obrazów powinny być skorygowane (obsługiwane przez Qualys) |Ocena luk w zabezpieczeniach obrazów kontenerów skanuje rejestr pod kątem luk w zabezpieczeniach i udostępnia szczegółowe wyniki dla każdego obrazu. Rozwiązanie luk w zabezpieczeniach może znacznie ulepszyć stan zabezpieczeń kontenerów i chronić je przed atakami.<br />(Powiązane zasady: [luki w zabezpieczeniach Azure Container Registry obrazów należy skorygować](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f5f0f936f-2f01-4bf5-b6be-d423792fa562)) |Wys. |
|||
